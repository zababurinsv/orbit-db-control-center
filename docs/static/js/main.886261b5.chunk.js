(this["webpackJsonporbit-db-control-center"]=this["webpackJsonporbit-db-control-center"]||[]).push([[0],{1059:function(e,t){},1110:function(e,t){},1322:function(e,t){},1355:function(e,t){},1357:function(e,t){},1385:function(e,t){},1528:function(e,t,a){"use strict";a.r(t);var n,r,c=a(0),o=a.n(c),l=a(127),i=a.n(l),u=a(126),s=(a(593),a(46)),p=a(337),m=a(53),d=Object(c.createContext)(),f=function(e){var t=e.reducer,a=e.initialState,n=e.children;return o.a.createElement(d.Provider,{value:Object(c.useReducer)(t,a)},n)},b=function(){return Object(c.useContext)(d)},g={OPEN_CREATEDB_DIALOG:"OPEN_CREATEDB_DIALOG",CLOSE_CREATEDB_DIALOG:"CLOSE_CREATEDB_DIALOG",OPEN_ADDDB_DIALOG:"OPEN_ADDDB_DIALOG",CLOSE_ADDDB_DIALOG:"CLOSE_ADDDB_DIALOG",SET_DB:"SET_DB"},E={SET_IPFS:"SET_IPFS",SET_ORBITDB:"SET_ORBITDB"},O={SET_PROGRAMS:"SET_PROGRAMS",SET_PROGRAMS_LOADING:"SET_PROGRAMS_LOADING",SET_PROGRAM:"SET_PROGRAM",SET_PROGRAM_LOADING:"SET_PROGRAM_LOADING"},h=a(3),v=a.n(h),y=a(12),j=a(29),D=a(1542),S=a(1543),x=a(77),w=a(1544),A=a(338),_=a(575),C=a.n(_),T=a(577),B=a.n(T),k={ipfs:{preload:{enabled:!1},config:{Addresses:{Swarm:["/dns4/web3-star.herokuapp.com/tcp/443/wss/p2p-webrtc-star/","/dns4/wrtc-star1.par.dwebops.pub/tcp/443/wss/p2p-webrtc-star/","/dns4/wrtc-star2.sjc.dwebops.pub/tcp/443/wss/p2p-webrtc-star/","/dns4/webrtc-star.discovery.libp2p.io/tcp/443/wss/p2p-webrtc-star/"]}}}},R=function(){var e=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,C.a.create(k.ipfs);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,B.a.createInstance(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(y.a)(v.a.mark((function e(){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r||!n){e.next=6;break}return e.next=3,n.feed("network.programs",{accessController:{write:[n.identity.id]},create:!0});case 3:return r=e.sent,e.next=6,r.load();case 6:return e.abrupt("return",r?r.iterator({limit:-1}).collect():[]);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),G=function(){var e=Object(y.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=6;break}return e.next=3,n.open(t);case 3:return a=e.sent,e.next=6,a.load();case 6:return e.abrupt("return",a);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=function(){var e=Object(y.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.open(t);case 2:return a=e.sent,e.abrupt("return",r.add({name:a.dbname,type:a.type,address:t,added:Date.now()}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),N=function(){var e=Object(y.a)(v.a.mark((function e(t,a,c){var o,l;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=c,e.next="public"===e.t0?3:5;break;case 3:return o={write:["*"]},e.abrupt("break",7);case 5:return o={write:[n.identity.id]},e.abrupt("break",7);case 7:return e.next=9,n.create(t,a,{accessController:o});case 9:return l=e.sent,e.abrupt("return",r.add({name:t,type:a,address:l.address.toString(),added:Date.now()}));case 11:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),M=function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.remove(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var X=function(){var e=b(),t=Object(j.a)(e,2),a=t[0],n=t[1];return o.a.useEffect((function(){n({type:O.SET_PROGRAMS_LOADING,loading:!0}),R().then(function(){var e=Object(y.a)(v.a.mark((function e(t){return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n({type:E.SET_IPFS,ipfsStatus:"Started"}),L(t).then(function(){var e=Object(y.a)(v.a.mark((function e(t){var a;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:E.SET_ORBITDB,orbitdbStatus:"Started"}),e.next=3,I();case 3:a=e.sent,n({type:O.SET_PROGRAMS,programs:a.reverse()}),n({type:O.SET_PROGRAMS_LOADING,loading:!1});case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}());case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[n]),o.a.createElement(p.a,{background:"white",elevation:1},o.a.createElement(p.a,{display:"flex",flexDirection:"column",alignItems:"left",paddingX:Object(D.a)(6),paddingY:Object(D.a)(1)},o.a.createElement(S.a,{href:"#/",textDecoration:"none",display:"flex",flexDirection:"row"},o.a.createElement(x.a,{fontWeight:"600",marginRight:Object(w.a)(1)},"Systems:"),o.a.createElement(p.a,{display:"flex",alignItems:"center",marginX:Object(w.a)(1)},"Started"===a.ipfsStatus?o.a.createElement(A.a,{size:6,icon:"full-circle",color:"success"}):o.a.createElement(A.a,{size:6,icon:"full-circle",color:"warning"}),o.a.createElement(x.a,{paddingLeft:Object(w.a)(2)},"IPFS")),o.a.createElement(p.a,{display:"flex",alignItems:"center",marginX:Object(D.a)(1)},"Started"===a.orbitdbStatus?o.a.createElement(A.a,{size:6,icon:"full-circle",color:"success"}):o.a.createElement(A.a,{size:6,icon:"full-circle",color:"warning"}),o.a.createElement(x.a,{paddingLeft:Object(w.a)(2)},"OrbitDB")))))},z=a(1545),F=a(1546);var W=function(){var e=Object(m.g)();return o.a.createElement(p.a,{background:"white",elevation:1},o.a.createElement(p.a,{className:"row-wrap",display:"flex",borderBottom:"default"},o.a.createElement(p.a,{className:"align title",display:"flex",flex:"1 1 60%"},o.a.createElement(S.a,{href:"#/",textDecoration:"none",display:"flex",flexDirection:"row",alignItems:"center"},o.a.createElement("img",{src:"Orbit_round-02.png",width:Object(D.a)(5)}),o.a.createElement(z.a,{size:800,fontFamily:"Titillium Web",marginX:Object(D.a)(2)},"CONTROL CENTER"))),o.a.createElement(p.a,{className:"align search",display:"flex",alignItems:"center",justifyContent:"center"},o.a.createElement(F.a,{width:"100%",flex:"1 1 100%",placeholder:"Search...",height:24,onKeyUp:function(t){13===t.keyCode&&e.push("/search?q=".concat(t.target.value))}}))))},H=a(1530),V=a(1547),Y=a(1548),q=a(583),J=a(580);var K=function(){var e=b(),t=Object(j.a)(e,2),a=t[0],n=t[1],r=o.a.useState(""),c=Object(j.a)(r,2),l=c[0],i=c[1],u=function(){var e=Object(y.a)(v.a.mark((function e(){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("eventlog"===(t=a.db).type){e.next=3;break}throw new Error("This component can only handle Log databases");case 3:return e.next=5,t.add(l);case 5:return e.next=7,t.iterator({limit:10}).collect().reverse();case 7:r=e.sent,n({type:g.SET_DB,db:t,entries:r});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(p.a,{flex:"1"},o.a.createElement(z.a,{marginBottom:Object(D.a)(1)},"Add an event to the log"),o.a.createElement(q.a,{onChange:function(e){i(e.target.value)},name:"value",placeholder:"Value",height:24,width:"30%"}),o.a.createElement(J.a,{iconBefore:"plus",appearance:"default",height:24,marginLeft:Object(D.a)(1),onClick:function(e){e&&e.preventDefault(),0!==l.length&&u()}},"Add"))};var U=function(){var e=b(),t=Object(j.a)(e,2),a=t[0],n=t[1],r=o.a.useState(""),c=Object(j.a)(r,2),l=c[0],i=c[1],u=function(){var e=Object(y.a)(v.a.mark((function e(){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("feed"===(t=a.db).type){e.next=3;break}throw new Error("This component can only handle Feed databases");case 3:return e.next=5,t.add(l);case 5:return e.next=7,t.iterator({limit:10}).collect().reverse();case 7:r=e.sent,n({type:g.SET_DB,db:t,entries:r});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(p.a,{flex:"1"},o.a.createElement(z.a,{marginBottom:Object(D.a)(1)},"Add an entry to the feed"),o.a.createElement(q.a,{onChange:function(e){i(e.target.value)},name:"value",placeholder:"Data",height:24,width:"30%"}),o.a.createElement(J.a,{iconBefore:"plus",appearance:"default",height:24,marginLeft:Object(D.a)(1),onClick:function(e){e&&e.preventDefault(),0!==l.length&&u()}},"Add"))};var $=function(){var e=b(),t=Object(j.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(""),l=Object(j.a)(r,2),i=l[0],u=l[1],s=Object(c.useState)(""),m=Object(j.a)(s,2),d=m[0],f=m[1],E=function(){var e=Object(y.a)(v.a.mark((function e(){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("keyvalue"===(t=a.db).type){e.next=3;break}throw new Error("This component can only handle Key-Value databases");case 3:return e.next=5,t.set(i,d);case 5:r=Object.keys(t.all).map((function(e){return{payload:{value:{key:e,value:t.get(e)}}}})),n({type:g.SET_DB,db:t,entries:r});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(p.a,{flex:"1"},o.a.createElement(z.a,{marginBottom:Object(D.a)(1)},"Set a value for a key"),o.a.createElement(q.a,{onChange:function(e){u(e.target.value)},name:"key",placeholder:"key",height:24,width:"20%"}),o.a.createElement(q.a,{onChange:function(e){f(e.target.value)},name:"value",placeholder:"value",height:24,width:"20%",marginLeft:Object(D.a)(1)}),o.a.createElement(J.a,{iconBefore:"plus",appearance:"default",height:24,marginLeft:Object(D.a)(1),onClick:function(e){e&&e.preventDefault(),0!==d.length&&0!==i.length&&E()}},"Set"))};var Q=function(){var e=b(),t=Object(j.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(""),l=Object(j.a)(r,2),i=l[0],u=l[1],s=Object(c.useState)(""),m=Object(j.a)(s,2),d=m[0],f=m[1],E=function(){var e=Object(y.a)(v.a.mark((function e(){var t,r;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("docstore"===(t=a.db).type){e.next=3;break}throw new Error("This component can only handle Document databases");case 3:return e.next=5,t.put({_id:i,value:d});case 5:r=t.query((function(e){return null!==e}),{fullOp:!0}).reverse(),n({type:g.SET_DB,db:t,entries:r});case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(p.a,{flex:"1"},o.a.createElement(z.a,{marginBottom:Object(D.a)(1)},"Add a document to the database"),o.a.createElement(q.a,{onChange:function(e){u(e.target.value)},name:"key",placeholder:"_id",height:24,width:"20%"}),o.a.createElement(q.a,{onChange:function(e){f(e.target.value)},name:"value",placeholder:"document",height:24,width:"20%",marginLeft:Object(D.a)(1)}),o.a.createElement(J.a,{iconBefore:"plus",appearance:"default",height:24,marginLeft:Object(D.a)(1),onClick:function(e){e&&e.preventDefault(),0!==d.length&&0!==i.length&&E()}},"Put"))};var Z=function(){var e=b(),t=Object(j.a)(e,2),a=t[0],n=t[1],r=Object(c.useState)(1),l=Object(j.a)(r,2),i=l[0],u=l[1],s=function(){var e=Object(y.a)(v.a.mark((function e(){var t,r,c;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("counter"===(t=a.db).type){e.next=3;break}throw new Error("This component can only handle Counter databases");case 3:if(!((r=parseInt(i)||0)>0)){e.next=7;break}return e.next=7,t.inc(r);case 7:c=[{payload:{value:t.value}}],n({type:g.SET_DB,db:t,entries:c});case 9:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return o.a.createElement(p.a,{flex:"1"},o.a.createElement(z.a,{marginBottom:Object(D.a)(1)},"Increment the value of the counter"),o.a.createElement(q.a,{onChange:function(e){u(e.target.value)},name:"value",defaultValue:1,placeholder:"amount",height:24,width:"10%"}),o.a.createElement(J.a,{iconBefore:"plus",appearance:"default",height:24,marginLeft:Object(D.a)(1),onClick:function(e){e&&e.preventDefault(),0!==i.length&&s()}},"Increment"))},ee={eventlog:"#47B881",feed:"#14B5D0",keyvalue:"#1070CA",docstore:"#D9822B",counter:"#735DD0"};var te=function(){var e=Object(m.i)(),t=e.programName,a=e.dbName,n=b(),r=Object(j.a)(n,2),l=r[0],i=r[1],u=Object(m.g)(),s=o.a.useState(null),d=Object(j.a)(s,2),f=d[0],E=d[1],h=o.a.useState(!1),S=Object(j.a)(h,2),w=S[0],A=S[1],_=o.a.useState("/orbitdb/".concat(t,"/").concat(a)),C=Object(j.a)(_,1)[0],T=function(){var e=Object(y.a)(v.a.mark((function e(t){var a,n;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),e.next=3,G(t);case 3:if(!(a=e.sent)){e.next=14;break}if("eventlog"!==a.type&&"feed"!==a.type){e.next=11;break}return e.next=8,a.iterator({limit:10}).collect().reverse();case 8:n=e.sent,e.next=12;break;case 11:n="counter"===a.type?[{payload:{value:a.value}}]:"keyvalue"===a.type?Object.keys(a.all).map((function(e){return{payload:{value:{key:e,value:a.get(e)}}}})):"docstore"===a.type?a.query((function(e){return null!==e}),{fullOp:!0}).reverse():[{payload:{value:"TODO"}}];case 12:i({type:g.SET_DB,db:a,entries:n}),A(!1);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){T(C);var e=l.programs.find((function(e){return e.payload.value.address===C}));i({type:O.SET_PROGRAM,program:e})}),[i,C,l.programs]),o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{marginTop:Object(D.a)(3),marginBottom:Object(D.a)(2),marginX:Object(D.a)(1),display:"flex",flexDirection:"row",alignItems:"baseline"},o.a.createElement(Y.a,{icon:"arrow-left",appearance:"minimal",onClick:function(){l.db&&l.db.close().then((function(){i({type:O.SET_PROGRAM,program:null}),i({type:g.SET_DB,db:null,entries:[]}),u.goBack()}))}}),o.a.createElement(z.a,{marginLeft:Object(D.a)(1),display:"flex",fontFamily:"Titillium Web",color:"#425A70",size:700,textTransform:"uppercase"},"DATABASE")),o.a.createElement(p.a,{display:"flex",justifyContent:"center"},o.a.createElement(p.a,{flex:"1",overflow:"auto",elevation:1,background:"white",marginX:Object(D.a)(6),padding:Object(D.a)(4)},o.a.createElement(p.a,{borderBottom:"default"},o.a.createElement(z.a,{size:500,marginBottom:Object(D.a)(1),borderBottom:"default",overflow:"auto"},"/orbitdb/",t,"/",a)),o.a.createElement(p.a,null,function(){var e=l.program?l.program.payload.value:null;return o.a.createElement(p.a,{marginTop:Object(D.a)(2)},o.a.createElement(p.a,{flex:"1"},o.a.createElement(x.a,null,"Name: ",e?e.name:"-")),o.a.createElement(p.a,{flex:"1"},o.a.createElement(x.a,null,"Type: "),e?o.a.createElement(x.a,{color:ee[e.type]},e.type):o.a.createElement(x.a,null,"-")),o.a.createElement(p.a,{flex:"1"},o.a.createElement(x.a,null,"Permissions:"),l.db?o.a.createElement("pre",null,l.db.access.write):o.a.createElement(x.a,null,"-")),o.a.createElement(p.a,{flex:"1",flexDirection:"row"},o.a.createElement(x.a,null,"Entries: "),l.db?o.a.createElement(x.a,null,l.db._oplog.length):o.a.createElement(x.a,null,"-")),o.a.createElement(p.a,{flex:"1",marginBottom:Object(D.a)(2)},o.a.createElement(z.a,{size:500,marginTop:Object(D.a)(2),marginBottom:Object(D.a)(1)},function(){var e=l.program?l.program.payload.value:null;if(e)return"eventlog"===e.type?"Latest 10 events":"feed"===e.type?"Latest 10 entries":"docstore"===e.type?"All Documents":"keyvalue"===e.type?"Keys and Values":"counter"===e.type?"Count":o.a.createElement(x.a,{intent:"danger"},"No input controls found for '",e.type,"'")}()),w?o.a.createElement(H.a,{size:Object(D.a)(2),delay:100,marginY:Object(D.a)(2)}):l.entries.map((function(e,t){return t+=1,o.a.createElement("div",{key:t},o.a.createElement(p.a,null,o.a.createElement(x.a,{userSelect:"none",cursor:"pointer",onClick:function(){return function(e){E(e!==f?e:null)}(t)}},JSON.stringify(e.payload.value,null,2))),o.a.createElement(p.a,null,f&&t===f?o.a.createElement(V.a,{maxWidth:Object(D.a)(96),overflow:"auto",fontFamily:"Source Code Pro",marginY:Object(D.a)(1),paddingY:Object(D.a)(1),backgroundColor:"#FEF8E7"},JSON.stringify(e,null,2)):""))}))))}()),o.a.createElement(p.a,null,l.program?function(){var e=l.db;if(e)return"eventlog"===e.type?o.a.createElement(K,null):"feed"===e.type?o.a.createElement(U,null):"docstore"===e.type?o.a.createElement(Q,null):"keyvalue"===e.type?o.a.createElement($,null):"counter"===e.type?o.a.createElement(Z,null):o.a.createElement(x.a,{intent:"danger"},"No input controls found for '",e.type,"'")}():""))))},ae=a(1552),ne=a(1553),re={eventlog:"#47B881",feed:"#14B5D0",keyvalue:"#1070CA",docstore:"#D9822B",counter:"#735DD0"};var ce=function(e){var t=e.programs,a=e.onRemove,n=Object(m.g)();return o.a.createElement(ae.a,null,o.a.createElement(ae.a.Head,{padding:"0"},o.a.createElement(ae.a.TextHeaderCell,{flex:"1 1 2%",textAlign:"center",padding:Object(w.a)(2),alignItems:"baseline"},o.a.createElement(A.a,{size:Object(D.a)(2),icon:"eye-open"})),o.a.createElement(ae.a.TextHeaderCell,{flex:"1 1 10%",paddingX:0},"Name"),o.a.createElement(ae.a.TextHeaderCell,{flex:"1 1 5%",paddingX:Object(w.a)(1)},"Type"),o.a.createElement(ae.a.TextHeaderCell,{flex:"1 1 40%",paddingX:0},"Address"),o.a.createElement(ae.a.TextHeaderCell,{flex:"1 1 10%",paddingX:0},"Added"),o.a.createElement(ae.a.TextHeaderCell,{flex:"1 1 2%",textAlign:"center",padding:Object(w.a)(2),alignItems:"baseline"},o.a.createElement(A.a,{size:12,icon:"trash"}))),o.a.createElement(ae.a.Body,null,t.map((function(e){var t=e.payload.value;return o.a.createElement(ae.a.Row,{key:"program-id-".concat(t.address)},o.a.createElement(ae.a.Cell,{flex:"1 1 2%",display:"flex",flexDirection:"row",justifyContent:"center",padding:Object(w.a)(2)},o.a.createElement(Y.a,{appearance:"minimal",icon:"database",margin:0,padding:0,onClick:function(){return function(e){n.push(e.address)}(t)}})),o.a.createElement(ae.a.TextCell,{flex:"1 1 10%",paddingX:0},t.name),o.a.createElement(ae.a.TextCell,{flex:"1 1 5%",paddingX:Object(w.a)(1),textProps:{color:re[t.type]}},t.type),o.a.createElement(ae.a.TextCell,{flex:"1 1 40%",paddingX:0},t.address.toString()?t.address.toString():t.address),o.a.createElement(ae.a.TextCell,{flex:"1 1 10%",paddingX:0},t.added?Object(ne.a)(t.added)+" ago":"Unknown"),o.a.createElement(ae.a.Cell,{flex:"1 1 2%",display:"flex",flexDirection:"row",justifyContent:"center",padding:Object(w.a)(2)},o.a.createElement(Y.a,{appearance:"minimal",icon:"cross",intent:"danger",margin:0,padding:0,onClick:function(){return a(e.hash,t)}})))}))))},oe=a(1555),le=a(1554),ie=a(1551);var ue=function(e){var t=e.onCreate,a=b(),n=Object(j.a)(a,2),r=n[0],c=n[1],l=o.a.useState(""),i=Object(j.a)(l,2),u=i[0],s=i[1],p=o.a.useState("eventlog"),m=Object(j.a)(p,2),d=m[0],f=m[1],E=o.a.useState("creator"),O=Object(j.a)(E,2),h=O[0],v=O[1];function y(e){e&&e.preventDefault(),0!==u.length&&(console.log("Create:",u,d,h),t({name:u,type:d,permissions:h}),c({type:g.CLOSE_CREATEDB_DIALOG}))}return o.a.createElement(oe.a,{isShown:r.createDBDialogOpen,title:"Create Database",onCloseComplete:function(){return c({type:g.CLOSE_CREATEDB_DIALOG})},cancelLabel:"Cancel",confirmLabel:"Create",onConfirm:function(e){return y(null)}},o.a.createElement("form",{onSubmit:y},o.a.createElement(le.a,{label:"Database Name:"},o.a.createElement(q.a,{onChange:function(e){s(e.target.value)},name:"name",placeholder:"Database name",width:"100%"})),o.a.createElement(le.a,{label:"Type:"},o.a.createElement(ie.a,{onChange:function(e){f(e.target.value)}},o.a.createElement("option",{value:"eventlog",defaultValue:!0},"Immutable Log"),o.a.createElement("option",{value:"feed"},"A list of entries"),o.a.createElement("option",{value:"keyvalue"},"Key-Value Store"),o.a.createElement("option",{value:"docstore"},"Document Store"),o.a.createElement("option",{value:"counter"},"Counter (CRDT)"))),o.a.createElement(le.a,{label:"Write Permissions"},o.a.createElement(ie.a,{onChange:function(e){v(e.target.value)}},o.a.createElement("option",{value:"creator"},"Creator-only: Only you can write, public read"),o.a.createElement("option",{value:"public"},"Public: Anybody can write and write")))))};var se=function(e){var t=e.onAdd,a=b(),n=Object(j.a)(a,2),r=n[0],c=n[1],l=o.a.useState(""),i=Object(j.a)(l,2),u=i[0],s=i[1];function p(e){e&&e.preventDefault(),0!==u.length&&(console.log("Add:",u),t({address:u}),c({type:g.CLOSE_ADDDB_DIALOG}))}return o.a.createElement(oe.a,{isShown:r.addDBDialogOpen,title:"Add Database",onCloseComplete:function(){return c({type:g.CLOSE_ADDDB_DIALOG})},cancelLabel:"Cancel",confirmLabel:"Add",onConfirm:function(e){return p(null)}},o.a.createElement("form",{onSubmit:p},o.a.createElement(q.a,{onChange:function(e){s(e.target.value)},name:"address",placeholder:"Address",width:"100%"})))};var pe=function(){var e=b(),t=Object(j.a)(e,2),a=t[0],n=t[1];function r(){return c.apply(this,arguments)}function c(){return(c=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:O.SET_PROGRAMS_LOADING,loading:!0}),e.next=3,I();case 3:return t=e.sent,n({type:O.SET_PROGRAMS,programs:t.reverse()}),n({type:O.SET_PROGRAMS_LOADING,loading:!1}),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return o.a.createElement(o.a.Fragment,null,o.a.createElement(p.a,{marginX:Object(D.a)(6)},o.a.createElement(z.a,{fontFamily:"Titillium Web",color:"#425A70",size:700,textTransform:"uppercase",marginTop:Object(D.a)(3),marginBottom:Object(D.a)(2)},"Databases")),o.a.createElement(p.a,{display:"flex",flexDirection:"row",marginX:Object(D.a)(6),marginTop:Object(D.a)(2),marginBottom:Object(D.a)(1)},o.a.createElement(J.a,{iconBefore:"document",appearance:"default",height:24,onClick:function(){n({type:g.OPEN_CREATEDB_DIALOG})}},"Create"),o.a.createElement(J.a,{iconBefore:"plus",appearance:"default",height:24,marginLeft:Object(w.a)(1),onClick:function(e){n({type:g.OPEN_ADDDB_DIALOG})}},"Open")),o.a.createElement(p.a,{display:"flex",justifyContent:"center",overflow:"auto"},o.a.createElement(ue,{onCreate:function(e){console.log("Create database...",e),N(e.name,e.type,e.permissions).then((function(e){console.log("Created",e),r().then((function(e){console.log("Loaded programs",e)}))}))}}),o.a.createElement(se,{onAdd:function(e){console.log("Add database...",e),P(e.address).then((function(t){console.log("Added",e.address),r().then((function(e){console.log("Loaded programs",e)}))}))}}),o.a.createElement(p.a,{flex:"1",overflow:"auto",elevation:1,background:"white",marginX:Object(D.a)(6)},a.loading.programs?o.a.createElement(p.a,{display:"flex",flexDirection:"column",alignItems:"center",marginTop:Object(D.a)(3),marginBottom:Object(D.a)(1)},o.a.createElement(H.a,{size:24}),o.a.createElement(x.a,{marginY:Object(D.a)(1)},"Loading...")):o.a.createElement(ce,{programs:a.programs,onRemove:function(e,t){console.log("Remove database...",e,t),M(e).then((function(){console.log("Removed"),r().then((function(e){console.log("Loaded programs",e)}))}))}}))))};var me=function(){var e=b(),t=Object(j.a)(e,2),a=t[0],n=t[1],r=new URLSearchParams(Object(m.h)().search).get("q");if(!(r.length>=1))return o.a.createElement(m.a,{to:"/"});var c=a.programs;function l(){return(l=Object(y.a)(v.a.mark((function e(){var t;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n({type:O.SET_PROGRAMS_LOADING,loading:!0}),e.next=3,I();case 3:return t=e.sent,n({type:O.SET_PROGRAMS,programs:t.reverse()}),n({type:O.SET_PROGRAMS_LOADING,loading:!1}),e.abrupt("return",t);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return r&&(c=c.filter((function(e){var t=e.payload.value,a=t.name,n=t.type,c=t.address;return a.includes(r)||n.includes(r)||c.toString().includes(r)}))),o.a.createElement(p.a,{display:"flex",justifyContent:"center"},o.a.createElement(p.a,{flex:"1",elevation:1,background:"white",margin:Object(D.a)(6),padding:Object(D.a)(4)},o.a.createElement(p.a,{borderBottom:"default"},o.a.createElement(z.a,{size:600,marginBottom:Object(D.a)(1)},c.length," programs found")),"loading"!==c?o.a.createElement(ce,{programs:c,onRemove:function(e,t){console.log("Remove database...",e,t),M(e).then((function(){console.log("Removed"),function(){return l.apply(this,arguments)}().then((function(e){console.log("Loaded programs",e)}))}))}}):o.a.createElement(H.a,{marginX:"auto",marginY:120})))};var de=function(){return o.a.createElement(f,{initialState:{user:null,loginDialogOpen:!1,createDBDialogOpen:!1,addDBDialogOpen:!1,programs:[],program:!1,db:null,entries:[],orbitdbStatus:"Starting",ipfsStatus:"Starting",loading:{programs:!1}},reducer:function(e,t){switch(t.type){case E.SET_ORBITDB:return Object(s.a)(Object(s.a)({},e),{},{orbitdbStatus:t.orbitdbStatus});case E.SET_IPFS:return Object(s.a)(Object(s.a)({},e),{},{ipfsStatus:t.ipfsStatus});case O.SET_PROGRAM:return Object(s.a)(Object(s.a)({},e),{},{program:t.program});case O.SET_PROGRAM_LOADING:return Object(s.a)(Object(s.a)({},e),{},{program:"loading"});case O.SET_PROGRAMS:return Object(s.a)(Object(s.a)({},e),{},{programs:t.programs});case g.SET_DB:return Object(s.a)(Object(s.a)({},e),{},{db:t.db,entries:t.entries});case g.OPEN_CREATEDB_DIALOG:return Object(s.a)(Object(s.a)({},e),{},{createDBDialogOpen:!0});case g.CLOSE_CREATEDB_DIALOG:return Object(s.a)(Object(s.a)({},e),{},{createDBDialogOpen:!1});case g.OPEN_ADDDB_DIALOG:return Object(s.a)(Object(s.a)({},e),{},{addDBDialogOpen:!0});case g.CLOSE_ADDDB_DIALOG:return Object(s.a)(Object(s.a)({},e),{},{addDBDialogOpen:!1});case O.SET_PROGRAMS_LOADING:return Object(s.a)(Object(s.a)({},e),{},{loading:Object(s.a)(Object(s.a)({},e.loading),{},{programs:t.loading})});default:return e}}},o.a.createElement(p.a,{background:"tint1",height:"100%"},o.a.createElement(W,null),o.a.createElement(X,null),o.a.createElement(m.d,null,o.a.createElement(m.b,{path:"/search"},o.a.createElement(me,null)),o.a.createElement(m.b,{path:"/orbitdb/:programName/:dbName"},o.a.createElement(te,null)),o.a.createElement(m.b,{path:"/"},o.a.createElement(pe,null)))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));i.a.render(o.a.createElement(u.a,null,o.a.createElement(de,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},231:function(e,t){},588:function(e,t,a){e.exports=a(1528)},593:function(e,t,a){},601:function(e,t){},664:function(e,t){},665:function(e,t){},826:function(e,t){},865:function(e,t){},867:function(e,t){},993:function(e,t){}},[[588,1,2]]]);
//# sourceMappingURL=main.886261b5.chunk.js.map